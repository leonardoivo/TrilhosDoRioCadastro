-- ESIM.dbo.AGENCIABANCARIA definition

-- Drop table

-- DROP TABLE ESIM.dbo.AGENCIABANCARIA GO

CREATE TABLE ESIM.dbo.AGENCIABANCARIA (
	PESSOAID int NOT NULL,
	BANCO_PESSOAID int NOT NULL,
	NUMEROAGENCIA int NOT NULL,
	DVAGENCIA varchar(2) COLLATE Latin1_General_CI_AI NULL,
	DATAHORA datetime2(6) DEFAULT getdate() NOT NULL,
	CONSTRAINT PK_AGENCIABANCARIA PRIMARY KEY (PESSOAID)
) GO
 CREATE  UNIQUE NONCLUSTERED INDEX IN_AK_AGENCIABANCARIA ON dbo.AGENCIABANCARIA (  BANCO_PESSOAID ASC  , NUMEROAGENCIA ASC  )  
	 WITH (  PAD_INDEX = OFF ,FILLFACTOR = 100  ,SORT_IN_TEMPDB = OFF , IGNORE_DUP_KEY = OFF , STATISTICS_NORECOMPUTE = OFF , ONLINE = OFF , ALLOW_ROW_LOCKS = ON , ALLOW_PAGE_LOCKS = ON  )
	 ON [PRIMARY ]  GO
 CREATE NONCLUSTERED INDEX IX_FK_AGENCIABANCARIA_BANCO ON dbo.AGENCIABANCARIA (  BANCO_PESSOAID ASC  )  
	 WITH (  PAD_INDEX = OFF ,FILLFACTOR = 100  ,SORT_IN_TEMPDB = OFF , IGNORE_DUP_KEY = OFF , STATISTICS_NORECOMPUTE = OFF , ONLINE = OFF , ALLOW_ROW_LOCKS = ON , ALLOW_PAGE_LOCKS = ON  )
	 ON [PRIMARY ]  GO;


-- ESIM.dbo.AGENCIABANCARIA foreign keys

ALTER TABLE ESIM.dbo.AGENCIABANCARIA ADD CONSTRAINT FK_AGENCIABANCARIA_BANCO FOREIGN KEY (BANCO_PESSOAID) REFERENCES ESIM.dbo.BANCO(PESSOAID) GO
ALTER TABLE ESIM.dbo.AGENCIABANCARIA ADD CONSTRAINT FK_AGENCIABANCARIA_PESSOA FOREIGN KEY (PESSOAID) REFERENCES ESIM.dbo.PESSOA(PESSOAID) GO;